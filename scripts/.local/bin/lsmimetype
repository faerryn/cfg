#!/bin/sh

set -euf

MIME_DIR=/usr/share/mime

if [ "${#}" -eq 0 ]; then
	find "${MIME_DIR}" -mindepth 2 -maxdepth 2 -type f -regex '^.*\.xml$' |
		exec sed -e 's/^.*\/\([^/]\+\/[^/]\+\)\.xml$/\1/'
else
	for file; do
		sed -n -e '/MimeType/s/\(MimeType=\|;\)/\n/gp' "${file}"
	done
fi
